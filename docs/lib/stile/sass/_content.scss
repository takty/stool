/**
 *
 * Content Style (SCSS)
 *
 * @author Takuto Yanagida @ Space-Time Inc.
 * @version 2018-05-21
 *
 */


@import 'content/block';
@import 'content/heading';
@import 'content/link';
@import 'content/inline';
@import 'content/list';
@import 'content/table';
@import 'content/print';

$stile-size-unit: 0.9rem !default;
@function vr($val) {@return $val * $stile-size-unit;}


@mixin stile-content($set-heading-design: true) {
	@include stile-margin-basic;
	@include stile-margin-advanced;

	@include stile-block;
	@include stile-heading($set-heading-design);
	@include stile-inline;
	@include stile-link;
	@include stile-list;
	@include stile-table;

	@media print { @include stile-print; }
}

@mixin stile-margin-basic {
	text-align: center;  // for table on IE11
	> * { text-align: left; }  // for table on IE11

	> * + * { margin-top: vr(2); }
	> *:first-child.alignleft  + *:not([class]) { margin-top: 0; }
	> *:first-child.alignright + *:not([class]) { margin-top: 0; }
}

@mixin stile-margin-advanced() {
	*:not([class]) + table { margin-top: vr(4); }
	table + *:not([class]) { margin-top: vr(4); }

	*:not([class]) + figure:not(.alignright):not(.alignleft) { margin-top: vr(4); }
	figure:not(.alignright):not(.alignleft) + *:not([class]) { margin-top: vr(4); }
	*:not([class]) + figure[data-stile ~= 'aligncenter'] { margin-top: vr(4); }
	figure[data-stile ~= 'aligncenter'] + *:not([class]) { margin-top: vr(4); }

	* + hr { margin-top: vr(4); }
	hr + * { margin-top: vr(4); }

	// The order below has meaning!
	@include stile-define-heading-margin(h6, 3, 1);
	@include stile-define-heading-margin(h5, 4, 2);
	@include stile-define-heading-margin(h4, 5, 3);
	@include stile-define-heading-margin(h3, 6, 4);
	@include stile-define-heading-margin(h2, 6, 5);
	@include stile-define-heading-margin(h1, 6, 6);

	p + p { margin-top: vr(1); }
	ul:not([class]) > li + li { margin-top: vr(1); }
	ol:not([class]) > li + li::before { padding-top: vr(1); }  // Must use 'padding-top' instead of 'margin-top' because ol's 'display' is 'table'.
	ul.stile > li + li { margin-top: vr(1); }
	ol.stile > li + li::before { padding-top: vr(1); }  // Must use 'padding-top' instead of 'margin-top' because ol's 'display' is 'table'.
	li > ul, li > ol, li > dl, dd > ul, dd > ol, dd > dl { margin-top: vr(1); }  // for nesting Lists
	* + dt { margin-top: vr(1); }
	* + figcaption { margin-top: vr(1); }

	blockquote {
		> * + * { margin-top: vr(1); }
		> *:first-child { margin-top: 0; }
	}
}

@mixin stile-define-heading-margin($tag, $top, $bottom) {
	*:not(.alignright):not(.alignleft) + #{$tag} { margin-top: vr($top); }
	#{$tag} + *:not(.alignright):not(.alignleft) { margin-top: vr($bottom); }
	#{$tag} {
		& + figure.alignright,
		& + figure.alignleft {
			& + *:not(.alignright):not(.alignleft) { margin-top: vr($bottom); }
		}
	}
}
