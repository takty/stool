/**
 *
 * Font Mixins
 *
 * @author Takuto Yanagida @ Space-Time Inc.
 * @version 2018-06-27
 *
 */


@import 'base';

@import url('https://fonts.googleapis.com/css?family=Nunito+Sans:300,700');              // Laten
@import url('https://fonts.googleapis.com/css?family=Roboto:300,700&text=0123456789/');  // Number and Slash
@import url('https://fonts.googleapis.com/css?family=Spectral:300,600,300i,600i');       // Laten Serif

$stile-font-sans-serif-laten : 'Nunito Sans';
$stile-font-sans-serif-number: 'Roboto';
$stile-font-serif-laten      : 'Spectral';


$stile-font-sans-serif:
	-apple-system, BlinkMacSystemFont, 'Helvetica Neue',
	'Yu Gothic', 'YuGothic',
	Verdana, Meiryo, sans-serif;

$stile-font-sans-serif-ie:
	Verdana, Meiryo, sans-serif;

$stile-font-sans-serif-ios:
	'Helvetica Neue', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN',
	sans-serif;

$stile-font-sans-serif-android:
	'Noto Sans CJK JP',
	sans-serif;


$stile-font-serif:
	'Yu Mincho',
	'Hiragino Mincho ProN', 'Hiragino Mincho Pro',
	Georgia, Meiryo, serif;

$stile-font-serif-ie:
	'HGS Mincho', 'Yu Mincho',
	Georgia, Meiryo, serif;

$stile-font-serif-android:
	'Noto Serif CJK JP',
	'Sawarabi Mincho',
	Georgia, serif;


$stile-font-monospace:
	'Noto Sans Mono CJK JP', 'Source Han Code JP N', 'IPA Gothic',
	Monaco, Consolas, Courier, 'Courier New',
	'Osaka-Mono',
	monospace;


// -----------------------------------------------------------------------------


@font-face {
	font-family: 'Yu Gothic';
	font-weight: 100;
	src: local('YuGothic-Medium'), local('Yu Gothic Medium'), local('YuGothic-Regular');
}

@font-face {
	font-family: 'Yu Gothic';
	font-weight: 200;
	src: local('YuGothic-Medium'), local('Yu Gothic Medium'), local('YuGothic-Regular');
}

@font-face {
	font-family: 'Yu Gothic';
	font-weight: 300;
	src: local('YuGothic-Medium'), local('Yu Gothic Medium'), local('YuGothic-Regular');
}

@font-face {
	font-family: 'Yu Gothic';
	font-weight: 400;
	src: local('YuGothic-Medium'), local('Yu Gothic Medium'), local('YuGothic-Regular');
}

@font-face {
	font-family: 'Yu Gothic';
	font-weight: normal;
	src: local('YuGothic-Medium'), local('Yu Gothic Medium'), local('YuGothic-Regular');
}

@font-face {
	font-family: 'Yu Gothic';
	font-weight: bold;
	src: local('YuGothic-Bold'), local('Yu Gothic Bold');
}


// -----------------------------------------------------------------------------


@font-face {
	font-family: 'Yu Mincho';
	font-weight: 100;
	src: local('YuMincho-Regular'), local('Yu Mincho Regular');
}

@font-face {
	font-family: 'Yu Mincho';
	font-weight: 200;
	src: local('YuMincho-Regular'), local('Yu Mincho Regular');
}

@font-face {
	font-family: 'Yu Mincho';
	font-weight: 300;
	src: local('YuMincho-Regular'), local('Yu Mincho Regular');
}

@font-face {
	font-family: 'Yu Mincho';
	font-weight: 400;
	src: local('YuMincho-Regular'), local('Yu Mincho Regular');
}

@font-face {
	font-family: 'Yu Mincho';
	font-weight: normal;
	src: local('YuMincho-Regular'), local('Yu Mincho Regular');
}

@font-face {
	font-family: 'Yu Mincho';
	font-weight: bold;
	src: local('YuMincho-Demibold'), local('Yu Mincho Demibold');
}


// -----------------------------------------------------------------------------


// Mainly for Android
@font-face {
	font-family: 'Sawarabi Mincho';
	src: url('//fonts.gstatic.com/ea/sawarabimincho/v1/SawarabiMincho-Regular.eot?#iefix') format('embedded-opentype'),
		url('//fonts.gstatic.com/ea/sawarabimincho/v1/SawarabiMincho-Regular.woff2') format('woff2'),
		url('//fonts.gstatic.com/ea/sawarabimincho/v1/SawarabiMincho-Regular.woff') format('woff'),
		url('//fonts.gstatic.com/ea/sawarabimincho/v1/SawarabiMincho-Regular.ttf') format('truetype');
}


// -----------------------------------------------------------------------------


@font-face {
	font-family: 'Helvetica Neue';
	font-weight: 100;
	src: local('Helvetica Neue Regular');
}

@font-face {
	font-family: 'Helvetica Neue';
	font-weight: 200;
	src: local('Helvetica Neue Regular');
}


// -----------------------------------------------------------------------------


@font-face {  // for Italic Japanese on IE11
	font-family: Meiryo;
	font-weight: normal;
	src: local('Meiryo');
}

@font-face {  // for Bold Japanese on IE11
	font-family: Meiryo;
	font-weight: bold;
	src: local('Meiryo Bold');
}

@font-face {  // for Serif Japanese on IE11 but bad quality when small size
	font-family: 'HGS Mincho';
	font-weight: normal;
	src: local('HGSMinchoB');
}

@font-face {  // for Serif Japanese on IE11 but bad quality when small size
	font-family: 'HGS Mincho';
	font-weight: bold;
	src: local('HGSMinchoE');
}


// -----------------------------------------------------------------------------


@mixin font-family {
	font-family: $stile-font-sans-serif-number, $stile-font-sans-serif-laten, $stile-font-sans-serif;
	@include for-ie {
		font-family: $stile-font-sans-serif-number, $stile-font-sans-serif-laten, $stile-font-sans-serif-ie;
	}
	&.ios, .ios & {  // need to use os.js
		font-family: $stile-font-sans-serif-ios;
	}
	&.android, .android & {  // need to use os.js
		font-family: $stile-font-sans-serif-android;
	}
}

@mixin font-family-serif {
	font-family: $stile-font-serif-laten, $stile-font-serif;
	&.android, .android & {  // need to use os.js
		font-family: $stile-font-serif-laten, $stile-font-serif-android;
	}
}

@mixin font-family-monospace {
	font-family: $stile-font-monospace;
}

@mixin font-proportional {
	font-feature-settings: 'pkna' 1;
}

@mixin font-smoothing {
	-moz-osx-font-smoothing: grayscale;
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
}

@mixin font-visible-chrome {
	@include for-chrome {
		-webkit-text-stroke-width: 0.15px;
	}
}

@mixin font-visible-chrome-cancel {
	@include for-chrome {
		-webkit-text-stroke-width: initial;
	}
}

@mixin font-bold {
	@include font-visible-chrome-cancel;
	font-weight: bold;
}

@mixin font-bold-cancel {
	@include font-visible-chrome;
	font-weight: normal;
}


// -----------------------------------------------------------------------------


@mixin font-responsive-size($min-vw, $max-vw, $min-value, $max-value) {
	font-size: $min-value;
	@media screen and (min-width: $min-vw) {
		font-size: calc(#{$min-value} + #{base-strip-unit($max-value - $min-value)} * (100vw - #{$min-vw}) / #{base-strip-unit($max-vw - $min-vw)});
	}
	@media screen and (min-width: $max-vw) {
		font-size: $max-value;
	}
}

@mixin font-size-level($level, $set-line-height: true) {
	$sizes: (
		0: 0.850rem, // 1.5
		1: 1.000rem, // 2.0
		2: 1.125rem, // 2.0
		3: 1.250rem, // 2.0
		4: 1.500rem, // 3.0
		5: 2.000rem, // 3.0
		6: 2.500rem, // 4.0
	);
	$level_f: floor($level);
	$fs: 0;

	@if $level_f == $level {
		$fs: map-get($sizes, $level);
	} @else {
		$level_c: ceil($level);
		$fs_f: map-get($sizes, $level_f);
		$fs_c: map-get($sizes, $level_c);
		$fs: $fs_f * ($level_c - $level) + $fs_c * ($level - $level_f);
	}
	font-size: $fs;

	@if $set-line-height {
		@if $level < 1 {
			line-height: base-vr(1.5);
		} @else {
			line-height: font-line-height($fs, $stile-size-unit);
		}
	}
}

@function font-line-height($font-size, $line-height-unit) {
	$vr: ceil($font-size / $line-height-unit + 0.5);
	@return $vr * $line-height-unit;
}
